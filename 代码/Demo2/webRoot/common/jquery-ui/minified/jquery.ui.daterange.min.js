(function(e){e.fn.daterange=function(f){var g=e.extend(e.fn.daterange.defaults,f);var h=d();e(this).addClass(e.fn.daterange.defaults.markerClassName).unbind("focus").bind("focus",{mainDiv:h},b)};e.fn.daterange.defaults={markerClassName:"hasDaterange",divClassName:"ui-dateRange",beginYear:1900,endYear:2099};function d(){var g=e.fn.daterange.defaults.divClassName+e.fn.daterange.defaults.beginYear+e.fn.daterange.defaults.endYear;var l=e("#"+g);if(l.length==0){l=e("<div />").attr("id",g).attr("noWrap",true).addClass(e.fn.daterange.defaults.divClassName).css("position","absolute").css("display","none");var k=e("<select />").css("width","auto");for(var h=e.fn.daterange.defaults.endYear;h>=e.fn.daterange.defaults.beginYear;h--){k.append('<option value="'+h+'" label="'+h+'">'+h+"</option>")}var j=e("<select />").css("width","auto");for(var h=1;h<=12;h++){j.append('<option value="'+h+'" label="'+h+'">'+h+"</option>")}var f=e('<button type="button" />').addClass("btnDefault").unbind("mouseover mouseout click").hover(function(){e(this).addClass("btnHover")},function(){e(this).removeClass("btnHover")});var n=f.clone(true).text("\u6e05\u7a7a").css("marginLeft",3).bind("click",function(){e(this).nextAll("div").hide();l.prev().prev("input").val("").prev("input:hidden").val("").prev("input:hidden").val("").prev("input:hidden").val("").prev("input:hidden").val("");c()});f.text("\u786e\u5b9a").bind("click",function(){var i=e(this).siblings("select");if(parseInt(i[0].value)<parseInt(i[2].value)||(i[0].value==i[2].value&&parseInt(i[1].value)<parseInt(i[3].value))){e(this).nextAll("div").hide();l.prev().prev("input").val(i[0].value+"."+i[1].value+" - "+i[2].value+"."+i[3].value).prev("input:hidden").val(i[3].value).prev("input:hidden").val(i[2].value).prev("input:hidden").val(i[1].value).prev("input:hidden").val(i[0].value);c()}else{e(this).nextAll("div").show()}});var m=e("<div />").css("color","#ff0000").css("display","none").text("\u7ed3\u675f\u65f6\u95f4\u5fc5\u987b\u665a\u4e8e\u8d77\u59cb\u65f6\u95f4");l.append(k).append(" \u5e74 ").append(j).append(" \u6708 \u81f3 ").append(k.clone()).append(" \u5e74 ").append(j.clone()).append(" \u6708 ").append(f).append(n).append(m);e(document).mousedown(a).find("body").append(l)}return l}function b(h){c();var j=this;while(j&&(j.type=="hidden"||j.nodeType!=1)){j=j.nextSibling}var l=e(j).offset();var o=e(this).prev("input:hidden"),i=o.prev("input:hidden"),g=i.prev("input:hidden"),k=g.prev("input:hidden");var m=h.data.mainDiv;var n=m.children("select");n[0].value=k.val();n[1].value=g.val();n[2].value=i.val();n[3].value=o.val();e(this).after(m.css({left:l.left,top:l.top+this.offsetHeight+1,display:""}));var f=e("#drShim");if(f.length==0){f=e('<iframe id="drShim" frameBorder="1" scrolling="no" />').css("position","absolute")}m.before(f.css({left:l.left,top:l.top+this.offsetHeight+1,width:m.attr("clientWidth"),height:m.attr("clientHeight")+parseInt(m.css("borderWidth"))*2,display:""}))}function c(){e("#drShim").hide();e("."+e.fn.daterange.defaults.divClassName).hide()}function a(g){if(e(":visible."+e.fn.daterange.defaults.divClassName).length==0){return}var f=e(g.target);if(!f.first().hasClass(e.fn.daterange.defaults.divClassName)&&f.parents("."+e.fn.daterange.defaults.divClassName).length==0&&!f.hasClass(e.fn.daterange.defaults.markerClassName)){c()}}})(jQuery);
